<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>Penny Pinching - Categories - $db_name</title>
<meta name="description" content="tracking finances by categorizing expenses">
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta http-equiv="content-style-type" content="text/css">

<link href="/static/site.css" type="text/css" rel="stylesheet" media="all"/>
<link href="/static/css/custom-theme/jquery-ui-1.8.5.custom.css" type="text/css" rel="stylesheet" media="all"/>

<script type="text/javascript" src="/static/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="/static/jquery-ui-1.8.5.custom.min.js"></script>

<script type="text/javascript" src="/static/jquery.constrain.js"></script>
<script type="text/javascript" src="/static/json2.js"></script>		
<script type="text/javascript" src="/static/mustache.js"></script>		
<script type="text/javascript" src="/static/ICanHaz.min.js"></script>		

<script type="text/javascript"> var db_name='$db_name'; </script>

<script id="user_details" type="text/html">
  <label>Database:</label>{{db_name}}
  {{#user}}
  <label>Name:</label> {{name}}
  <label>Permission:</label> {{permission}}
  {{/user}}
</script>

<script id="expense_category_list" type="text/html">
  {{#category}}
    <div class="expense_category" db_id="{{id}}" id="expense_id-{{id}}">
      <div class="balance-slider">
        <div class="minimum_graph"><span class="minimum">{{minimum}}</span></div>
        <div class="available_graph"></div>
        <span class="slider-balance-value">{{balance}}</span>
        <span class="maximum">{{maximum}}</span>
      </div>
      <h2>
        <span class="name">{{name}}</span> <span class="balance">{{balance}}</span>
        [<span class="allotment">{{allotment}}</span>]
      </h2>
      <input class="edit-button" type="button" value="edit">
    </div>
  {{/category}}
</script>
<script id="expense_category_list_edit" type="text/html">
  <div class="edit-form">
    <label>Name:</label><input type="text" name="name" value="{{name}}">
    <label>Balance:</label><input type="text" name="balance" value="{{balance}}">
    <label>Minimum:</label><input type="text" name="minimum" value="{{minimum}}">
    <label>Maximum:</label><input type="text" name="maximum" value="{{maximum}}">
    <label>Allotment:</label><input type="text" name="allotment" value="{{allotment}}">
    <label>Active:</label><input type="checkbox" name="active" {{checked}} value="1">
  </div>
</script>

<script id="inactive_category_list" type="text/html">
  {{#category}}
  <div class="inactive_category" id="inactive_category-{{id}}">
    <a href="" db_id="{{id}}">{{name}} {{balance}}</a>
  </div>
  {{/category}}
</script>

<script id="bill_category_list" type="text/html">
  {{#category}}
    <div class="bill_category" db_id="{{id}}" id="bill_id-{{id}}">
      <h2>
        <span class="name">{{name}}</span>
        <span class="amount_info">
          <span class="balance">{{balance}}</span> of
          <span class="maximum">{{maximum}}</span>
        </span>
      </h2>
      <div class="due-block">
        <label>Allotment Date: </label><span class="allotment_date">{{allotment_date}}</span>
        <label>Due: </label><span class="due">{{due}}</span>
      </div>
      <input class="edit-button" type="button" value="edit">
      <label>Repeat: </label><span class="repeat_due_date">{{repeat_due_date}}</span>
    </div>
  {{/category}}
</script>
<script id="bill_category_list_edit" type="text/html">
  <div class="edit-form">
    <label>Name:</label><input type="text" name="name" value="{{name}}">
    <label>Balance:</label><input type="text" name="balance" value="{{balance}}">
    <label>Maximum:</label><input type="text" name="maximum" value="{{maximum}}">
    <label>Allotment Date:</label><input type="text" name="allotment_date" value="{{allotment_date}}">

    <label>Due:</label><input type="text" name="due" value="{{due}}">
    <label>Repeat:</label><input type="text" name="repeat_due_date" value="{{repeat_due_date}}">
    <label>Active:</label><input type="checkbox" name="active" {{checked}} value="1">
  </div>
</script>
<script id="saving_category_list" type="text/html">
  {{#category}}
    <div class="saving_category">
      {{name}}
      {{balance}}
      {{minimum}}
      {{maximum}}
      {{allotment}}
    </div>
  {{/category}}
</script>
<script id="total_balance_data" type="text/html">
  <label>Available: </label> $currency <span id="available-balance">{{available}}</span>
</script>

<script type="text/javascript" src="/static/categories.js"></script>		

</head>
<body>
  <div id="page">
    <div id="user_details"></div>

    <div id="menu">
      <a href="/$db_name/transactions.html">Transactions Page</a>
      <a href="/$db_name/categories.html">Categories Page</a>
    </div>

    <div id="content">
      <div id="total_balance"> </div>
      <div id="categories">
        <div class="category_type" id="expense">
          <h2>Expense Categories</h2>
          <div class="form">
            <div id="new_expense_category">
              <div class="label_value">
                <label>Name:</label>
                <div class="value">
                  <input type="text" name="name">
                </div>
              </div>
              <div class="label_value">
                <label>Balance:</label>
                <div class="value">
                  <input class="currency" type="text" name="balance">
                </div>
                <div class="info">
                  This is the amount that has been set aside for this
                  expense.
                </div>
              </div>
              <div class="label_value">
                <label>Minimum:</label>
                <div class="value">
                  <input class="currency" type="text" name="minimum">
                </div>
                <div class="info">
                  When an income transaction occurs; this is the minimum
                  amount that will be met before distributing to other
                  expenses.
                </div>
              </div>
              <div class="label_value">
                <label>Maximum:</label>
                <div class="value">
                  <input class="currency" type="text" name="maximum">
                </div>
                <div class="info">
                  The maximum amount that can be put in this expense.
                </div>
              </div>
              <div class="label_value">
                <label>Allotment:</label>
                <div class="value">
                  <input class="allotment" type="text" name="allotment">
                </div>
                <div class="info">
                  This is the allotment that this expense gets in relation
                  to the other expenses.
                </div>
              </div>
            </div>
            <button id="add_expense_category">Add Expense Category</button>
          </div> <!-- .form -->
          <button class="toggle_add_form">show add form</button>

          <div class="category_list" id="expense_category_list"></div>
          <div class="inactive_category_list" id="expense_category_inactive_list"></div>
        </div> <!-- #expense -->
        <div class="category_type" id="bill">
          <h2>Bill Categories</h2>
          <div class="form">
            <div id="new_bill_category">
              <div class="label_value">
                <label>Name:</label>
                <div class="value">
                  <input type="text" name="name">
                </div>
              </div>
              <div class="label_value">
                <label>Balance:</label>
                <div class="value">
                  <input class="currency" type="text" name="balance">
                </div>
                <div class="info">
                  This is the amount that has been set aside for this
                  bill.
                </div>
              </div>
              <div class="label_value">
                <label>Maximum:</label>
                <div class="value">
                  <input class="currency" type="text" name="maximum">
                </div>
                <div class="info">
                  The maximum amount of the bill.
                </div>
              </div>
              <div class="label_value">
                <label>Allotment Date:</label>
                <div class="value">
                  <input type="text" name="allotment_date">
                </div>
                <div class="info">
                  After this date any income will be distributed to this bill
                  until it reaches it's maximum.
                </div>
              </div>
              <div class="label_value">
                <label>Due:</label>
                <div class="value">
                  <input type="text" name="due">
                </div>
                <div class="info">
                  The date the bill is due.  After this date, income will no
                  longer be distributed to the bill.
                </div>
              </div>
              <div class="label_value">
                <label>Repeat:</label>
                <div class="value">
                  <input type="text" name="repeat_due_date" value="+1 months">
                </div>
                <div class="info">
                  How often the bill repeats. Examples:
                    <span class="repeat_due_date-example">+1 months</span>,
                    <span class="repeat_due_date-example">+2 weeks</span>,
                    <span class="repeat_due_date-example">+12 days</span>,
                    <span class="repeat_due_date-example">+1 years</span>,
                    no repeat: <span class="repeat_due_date-example">0</span>.
                  The bill due and allotment dates will be adjusted according
                  to this.  Setting this to 
                    <span class="repeat_due_date-example">0</span>
                  will inactivate the bill as soon as it is paid.
                </div>
              </div>
            </div>
            <button id="add_bill_category">Add Bill Category</button>
          </div> <!-- .form -->
          <button class="toggle_add_form">show add form</button>

          <div class="category_list" id="bill_category_list"></div>
          <div class="inactive_category_list" id="bill_category_inactive_list"></div>
        </div> <!-- #bill -->
        <div class="category_type" id="saving">
          <h2>Saving Categories</h2>
          <div class="form">
            <div id="new_saving_category">
              <div class="label_value">
                <label>Name:</label>
                <div class="value">
                  <input type="text" name="name">
                </div>
              </div>
              <div class="label_value">
                <label>Balance:</label>
                <div class="value">
                  <input class="currency" type="text" name="balance">
                </div>
              </div>
              <div class="label_value">
                <label>Minimum:</label>
                <div class="value">
                  <input class="currency" type="text" name="minimum">
                </div>
              </div>
              <div class="label_value">
                <label>Maximum:</label>
                <div class="value">
                  <input class="currency" type="text" name="maximum">
                </div>
              </div>
              <div class="label_value">
                <label>Allotment:</label>
                <div class="value">
                  <input class="allotment" type="text" name="allotment">
                </div>
              </div>
            </div>
            <button id="add_saving_category">Add Saving Category</button>
          </div> <!-- .form -->
          <button class="toggle_add_form">show add form</button>

          <div class="category_list" id="saving_category_list"></div>
          <div class="inactive_category_list" id="saving_category_inactive_list"></div>
        </div> <!-- #saving -->
      </div> <!-- #categories -->
    </div> <!-- #content -->
  </div> <!-- #page -->
</body>
</html>
